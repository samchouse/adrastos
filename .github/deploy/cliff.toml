[changelog]
header = """
# What's Changed\n
"""
body = """
{% for group, commits in commits | group_by(attribute="group") %}
    ## {{ group | upper_first }}
    {% for commit in commits %}
        - {{ commit.message | trim_start | split(pat="\n") | first | trim_end }} by {{ commit.author.email }} at {{ commit.id | truncate(length=7, end="") }}\
    {% endfor %}
{% endfor %}\n
"""
trim = true
footer = """
<!-- generated by git-cliff -->
"""
postprocessors = [
  { pattern = '[-\w\[\]\+\.]+@([\w-]+\.)+[\w-]{2,4}', replace_command = "changelog-gh-usernames" },
  { pattern = "([a-f0-9]{7})", replace = "[${0}](https://github.com/samchouse/adrastos/commit/${0})" },
]

[git]
conventional_commits = false
commit_preprocessors = [{ pattern = " +", replace = " " }]
commit_parsers = [
  { message = "^feat", group = "Features" },
  { message = "^fix", group = "Bug Fixes" },
  { message = "^doc", group = "Documentation" },
  { message = "^perf", group = "Performance" },
  { message = "^refactor", group = "Refactor" },
  { message = "^style", group = "Styling" },
  { message = "^test", group = "Testing" },
  { message = '^chore\(release\):', skip = true },
  { message = "^chore", group = "Miscellaneous Tasks" },
  { message = ".*", group = "Other" },
]
sort_commits = "oldest"
